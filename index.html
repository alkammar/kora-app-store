<!DOCTYPE html>
<html>
  <head>
    <title>Opening App...</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script>
      const params = new URLSearchParams(window.location.search);
      const invitation = params.get('invitation');
      const group = params.get('group');

      const deepLink = `kora://join?invitation=${invitation}&group=${group}`;
      const iosStore = 'https://apps.apple.com/app/YOUR_APP_ID';
      const androidStore = 'https://play.google.com/store/apps/details?id=YOUR_PACKAGE_NAME';

      // Detect platform
      const userAgent = navigator.userAgent || navigator.vendor;
      const isAndroid = /android/i.test(userAgent);
      const isIOS = /iPad|iPhone|iPod/.test(userAgent) && !window.MSStream;

      const fallback = isAndroid ? androidStore : iosStore;

      // Try to open deep link
      window.location.href = deepLink;

      // If not installed, go to app store
      setTimeout(() => {
        window.location.href = fallback;
      }, 2000);
    </script>
  </head>
  <body>
    <p>Opening Kora...</p>
  </body>
</html>
